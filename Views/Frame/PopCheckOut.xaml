<?xml version="1.0" encoding="utf-8"?>
<pages:PopupPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:Rg.Plugins.Popup.Pages;assembly=Rg.Plugins.Popup"
    xmlns:animations  ="clr-namespace:Rg.Plugins.Popup.Animations;assembly=Rg.Plugins.Popup"
    x:Class="CS.ERP_MOB.Views.Frame.PopCheckOut"
    xmlns:general="clr-namespace:CS.ERP_MOB.General"
    xmlns:xct="http://schemas.microsoft.com/dotnet/2021/maui/communitytoolkit"
    Visual="Default"
    HasSystemPadding="true"
    SystemPaddingSides="All"
    CloseWhenBackgroundIsClicked="true">
    <pages:PopupPage.Animation>
        <animations:MoveAnimation
            PositionIn            ="Right"
            PositionOut           ="Right"
            DurationIn            ="400"
            DurationOut           ="300"
            EasingIn              ="SinOut"
            EasingOut             ="SinIn"
            HasBackgroundAnimation="true" />
    </pages:PopupPage.Animation>
    <Grid
        HorizontalOptions="EndAndExpand"
        VerticalOptions="Start"
        ColumnSpacing="0"
        Padding="0,50,0,0">
        <Grid.RowDefinitions>
            <RowDefinition  Height="300" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="300" />
        </Grid.ColumnDefinitions>
        <Frame 
            Grid.Row="0"
            Grid.Column="1"
            CornerRadius="3"
            HorizontalOptions="FillAndExpand"
            VerticalOptions="FillAndExpand"
            Padding="0">
            <StackLayout
                BackgroundColor="White"
                Grid.Row ="0"
                Grid.Column="1"
                VerticalOptions="FillAndExpand">
                <!--title view-->
                <StackLayout 
                    HorizontalOptions="FillAndExpand" 
                    VerticalOptions="Start"
                    Orientation="Vertical"
                    HeightRequest="20"
                    BackgroundColor="{StaticResource OvaPopupTitleColor}"
                    Padding="{StaticResource padding}">
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="FillAndExpand">
                        <Label
                            Text="&#xf07a;"
                            FontFamily="{StaticResource FontAwesomeSolid}"
                            VerticalOptions="Center"/>
                        <Label
                            Text="Shopping Cart"
                            VerticalOptions="Center"/>
                    </StackLayout>
                </StackLayout>
                <!--content area-->
                <ScrollView 
                    HorizontalOptions="FillAndExpand"
                    VerticalOptions="FillAndExpand">
                    <StackLayout
                        Padding="{StaticResource padding}"
                        BindableLayout.ItemsSource="{Binding ShoppingCartList, Source={x:Static general:Common.mCommon}}">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <Frame
                                    Padding="{StaticResource paddingCardView}">
                                    <StackLayout Orientation="Horizontal">
                                        <Grid HorizontalOptions="FillAndExpand">
                                            <Grid.RowDefinitions >
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="3*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <StackLayout
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                HorizontalOptions="FillAndExpand"
                                                VerticalOptions="Center">
                                                <Label
                                                    Text="{Binding StockName}"
                                                    LineBreakMode="TailTruncation"
                                                    HorizontalOptions="StartAndExpand"
                                                    FontSize="Medium"
                                                    VerticalOptions="Center"/>
                                            </StackLayout>

                                            <!--<StackLayout
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                HorizontalOptions="FillAndExpand"
                                                Orientation="Horizontal">
                                                <StackLayout
                                                    VerticalOptions="Center"
                                                    HorizontalOptions="FillAndExpand">
                                                    <Label
                                                        Text="&#xf2ed;" 
                                                        FontFamily="{StaticResource FontAwesomeSolid}" 
                                                        HorizontalOptions="End" 
                                                        VerticalOptions="Center"
                                                        TextColor="{StaticResource OvaDangerColor}"
                                                        FontSize="Large">
                                                        <Label.GestureRecognizers>
                                                            <TapGestureRecognizer 
                                                            Tapped="TgrDeleteStock_Tapped"
                                                            NumberOfTapsRequired="1"/>
                                                        </Label.GestureRecognizers>
                                                    </Label>
                                                </StackLayout>
                                            </StackLayout>-->

                                            <StackLayout
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                HorizontalOptions="FillAndExpand"
                                                VerticalOptions="Center"
                                                Orientation="Horizontal">
                                                <StackLayout
                                                    Orientation="Vertical"
                                                    HorizontalOptions="StartAndExpand">
                                                    <StackLayout
                                                        Orientation="Horizontal"
                                                        HorizontalOptions="StartAndExpand">
                                                        <Label
                                                            Text="{Binding Price, StringFormat='{0:F2}'}"
                                                            HorizontalOptions="StartAndExpand"
                                                            FontSize="Micro"
                                                            VerticalOptions="Center"/>
                                                        <Label
                                                            Text="X"
                                                            HorizontalOptions="StartAndExpand"
                                                            FontSize="Small"
                                                            VerticalOptions="Center"/>
                                                        <Label
                                                            Text="{Binding QTY, StringFormat='{0:F2}'}"
                                                            HorizontalOptions="EndAndExpand"
                                                            VerticalOptions="Center"
                                                            FontSize="Micro"/>
                                                    </StackLayout>
                                                    
                                                     
                                                </StackLayout>
                                            </StackLayout>
                                            <StackLayout
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                HorizontalOptions="FillAndExpand"
                                                VerticalOptions="Center">
                                                <StackLayout
                                                    Orientation="Vertical"
                                                    VerticalOptions="FillAndExpand"
                                                    HorizontalOptions="EndAndExpand">
                                                    <Label
                                                            Text="{Binding TotalAmount, StringFormat='{0:F2}'}"
                                                            HorizontalOptions="StartAndExpand"
                                                            VerticalOptions="Center"
                                                            FontSize="Small"/>
                                                    
                                                </StackLayout>
                                            </StackLayout>
                                            <StackLayout
                                                Grid.Row="2"
                                                Grid.Column="0">
                                                <StackLayout
                                                    Orientation="Horizontal"
                                                    VerticalOptions="FillAndExpand"
                                                    HorizontalOptions="StartAndExpand">

                                                     <StackLayout 
                                                        HorizontalOptions="EndAndExpand"
                                                        
                                                        >
                                                        <Frame 
                                                            Padding="{StaticResource padding}" 
                                                            VerticalOptions="Center" 
                                                            CornerRadius="3"
                                                            BackgroundColor="{StaticResource OvaBackgroundColor}"
                                                            HorizontalOptions="End">
                                                            <Label
                                                                Text="   +   "
                                                                FontSize="Large"
                                                                TextColor="{StaticResource OvaFrontColor}">
                                                                <Label.GestureRecognizers>
                                                                    <TapGestureRecognizer
                                                                        Tapped="TgrIncrease_Tapped"
                                                                        NumberOfTapsRequired="1"/>
                                                                </Label.GestureRecognizers>
                                                            </Label>
                                                           
                                                        </Frame>
                                                    </StackLayout>
                                                      <StackLayout 
                                                        HorizontalOptions="EndAndExpand"
                                                        
                                                        >
                                                        <Frame 
                                                            Padding="{StaticResource padding}" 
                                                            VerticalOptions="Center" 
                                                            CornerRadius="3"
                                                            BackgroundColor="{StaticResource OvaBackgroundColor}"
                                                            HorizontalOptions="End">
                                                            <Label
                                                                Text="   --   "
                                                                FontSize="Large"
                                                                TextColor="{StaticResource OvaFrontColor}">
                                                                <Label.GestureRecognizers>
                                                                    <TapGestureRecognizer
                                                                        Tapped="TgrDecrease_Tapped"
                                                                        NumberOfTapsRequired="1"/>
                                                                </Label.GestureRecognizers>
                                                            </Label>
                                                           
                                                        </Frame>
                                                    </StackLayout>
                                                </StackLayout>
                                            </StackLayout>
                                                     

                                                    <!--<Stepper
                                                         x:Name="stpQTy"
                                                         Value="1"
                                                         Minimum="0"
                                                         Maximum="100"
                                                         Increment="1"
                                                         HorizontalOptions="StartAndExpand"
                                                         BackgroundColor="{StaticResource OvaBackgroundColor}"
                                                         ValueChanged="stpQTy_ValueChanged" />-->
                                            <StackLayout
                                                Grid.Row="2"
                                                Grid.Column="1">
                                                <StackLayout
                                                    Orientation="Horizontal"
                                                    VerticalOptions="FillAndExpand"
                                                    HorizontalOptions="EndAndExpand">
                                                    <Label
                                                        Text="&#xf2ed;" 
                                                        FontFamily="{StaticResource FontAwesomeSolid}" 
                                                        HorizontalOptions="Center" 
                                                        VerticalOptions="Center"
                                                        TextColor="{StaticResource OvaDangerColor}"
                                                        FontSize="Large">
                                                        <Label.GestureRecognizers>
                                                            <TapGestureRecognizer 
                                                            Tapped="TgrDeleteStock_Tapped"
                                                            NumberOfTapsRequired="1"/>
                                                        </Label.GestureRecognizers>
                                                    </Label>

                                            </StackLayout>
                                            </StackLayout>
                                        </Grid>
                                    </StackLayout>
                                </Frame>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>

                    </StackLayout>
                </ScrollView>
                <!--footer view-->
                <StackLayout 
                    HorizontalOptions="FillAndExpand" 
                    VerticalOptions="Start"
                    Orientation="Vertical"
                    HeightRequest="30"
                    BackgroundColor="{StaticResource OvaPopupTitleColor}"
                    Padding="{StaticResource padding}">
                    <StackLayout
                        Orientation="Horizontal"
                        HorizontalOptions="EndAndExpand"
                        VerticalOptions="FillAndExpand">
                        <StackLayout
                          
                            Orientation="Horizontal"
                            HorizontalOptions="FillAndExpand">
                            <Label

                                Text="Total Amount: "
                                VerticalOptions="Center"
                                FontAttributes="Bold"/>
                                <Label
                                x:Name="lblCurrency"
                                 Text="50"
                                VerticalOptions="Center"
                                FontAttributes="Bold"/>
                            <Label
                                x:Name="lblTotalAmount"
                                 Text="50"
                                VerticalOptions="Center"
                                FontAttributes="Bold"/>
                        
                        </StackLayout>
                        <StackLayout 
                            HorizontalOptions="EndAndExpand"
                            
                            >
                            <Frame 
                                Padding="{StaticResource padding}" 
                                VerticalOptions="Center" 
                                CornerRadius="3"
                                BackgroundColor="{StaticResource OvaBackgroundColor}"
                                HorizontalOptions="End">
                                <Label
                                    Text="Checkout"
                                    TextColor="{StaticResource OvaFrontColor}">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer
                                            Tapped="TgrCheckOut_Tapped"
                                            NumberOfTapsRequired="1"/>
                                    </Label.GestureRecognizers>
                                </Label>
                            </Frame>
                        </StackLayout>
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </Frame>
    </Grid>
</pages:PopupPage>